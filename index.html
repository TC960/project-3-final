<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brain Analytics | EEG Visualization</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="cumulative-chart.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
  <div id="app-container">
    <!-- Main Content Area -->
    <div class="content-container">
      <!-- Left Section -->
      <main class="main-content">
        <!-- Tab Navigation -->
        <div class="visualization-tabs">
          <button class="tab-btn active" id="brain-view-tab">3D Brain View</button>
          <button class="tab-btn" id="cumulative-plot-tab">Cumulative Plot</button>
          <button class="tab-btn" id="project-writeup-tab">Project Writeup</button>
        </div>

        <!-- Project Writeup -->
        <div class="card tab-content" id="project-writeup-content">
          <div class="card-header">
            <h2>Project 3 Writeup</h2>
          </div>
          <div class="card-content" style="max-height: 80vh; overflow-y: auto; line-height: 1.6; font-size: 14px;">
            <h3>Design Rationale</h3>
            <p>Trying to understand the data ourselves, we observed the questions we asked while trying to visually imagine the data. We wanted to know more about the data collection itself for something that seemed so abstract to us like brain activity. Reading into it, we realised that it helped us internalise the data better and thus wanted to depict it for viewers to gauge the working and results of the experiment. Then we used movement in each channel bubble to represent the data collected by varying the size of the bubble. Hence, some bubbles that seem to be more jittery convey more variety in consecutive data points and the amount of the change in sizes represent varying intensity.</p>
            <br>
            <p>We maintained the colour legend throughout our project to ensure uniformity and ease for an audience to follow through each of the tabs by tracking the colour of the channels they are observing. Additionally, we used interactions to make it easier to examine the data in our visualization by including features like zooming in to all visualisations and rotating the 3D brain model to make it feel as close to a real life physical simulation as possible. We also discarded our idea for creating a legend for the size of the channel bubbles on the brain as we prioritized the zooming in feature which would then disregard the effectiveness of such a legend.</p>
            <br>
            <p>We used our initial idea as a second tab to enhance the project. Using line plots and an average line for all 6 channels, we made a graph to represent the data collected. However, this was not the most optimum as it appeared to be quite complex and didn’t satisfy our requirement for a visualisation to offer intuitive benefits immediately using simplicity. Thus, we decided to add it as a secondary page only for those who want to look further into the data all together and compare as many of the lines as possible with the interactive line selector we created. Instead of this complex graph, on the first page we added drop down lists to choose the participant and channel to display only EEG Data graphs that are relevant to viewers.</p>
            <br>
            <p>Lastly, we also considered alternate aesthetic choices as we played with colour schemes, font sizes, and layout possibilities but following through our goal of clarity with style, we decided a darker background emphasises our white coloured containers with visualisations and provided a professional look to our site which increases our visual credibility. We stuck to simple and typical fonts as science research usually does not use very extravagant and distracting features.</p>
            <br>
            <h3>Development Process</h3>
            <p>We first started by combing through datasets to find something intriguing for the entire group, as we narrowed it down for the checkpoint submission, we looked at the data for each option and chose the one that we found easiest to understand and that resonated with one of our team member’s research interests.</p>
            <br>
            <p>Then, we each explored the datasets and contributed equally to the checkpoint submissions by making our own graphs and submitting the most distinct ones.</p>
            <br>
            <p>However, after our checkpoint submission, we unanimously decided to choose another dataset, one with which we could create a more innovative visualization.</p>
            <br>
            <p>We then began our process of exploration, ideation, discussion. Then getting down to the actual code, one member took the lead and got us started on the project by creating a site and starting some of the visualizations. He then assigned tasks to us and as we cross checked each other’s code and suggested improvements, we managed to create our beloved project 3. Each member spent an average of 5 hours on this project.</p>
            <br>
            <p>Some of our main challenges included getting an innovative idea that was relevant to our data and provided some benefit compared to just statistical graphs, handling large amounts of data and working with lots of code by 4 people which had to be very well commented and organised, and, thirdly, fixing the pesky small bugs that took us forever to spot in our body of lines of code for the project.</p>
          </div>
        </div>

        <!-- 3D Brain Visualization -->
        <div class="card brain-card tab-content active" id="brain-view-content">
          <div class="card-header">
            <h2>3D Brain Activity</h2>
            <div class="controls">
              <button class="btn-icon"><i class="fas fa-expand"></i></button>
              <button class="btn-icon"><i class="fas fa-rotate"></i></button>
            </div>
          </div>
          <div id="brain-container" class="card-content">
            <!-- 3D Brain will be rendered here by brainViewer.js -->
          </div>
        </div>

        <!-- Cumulative Plot -->
        <div class="card chart-card tab-content" id="cumulative-plot-content">
          <div class="card-header">
            <h2>Multi-Channel EEG Analysis</h2>
            <div class="controls">
              <button class="btn-icon" id="refresh-chart"><i class="fas fa-sync-alt"></i></button>
              <button class="btn-icon" id="reset-zoom"><i class="fas fa-compress"></i></button>
            </div>
          </div>
          <div id="cumulative-chart-container" class="card-content">
            <!-- Multi-channel EEG chart will be rendered here -->
          </div>
        </div>
      </main>

      <!-- Right Section - Info Panel -->
      <aside id="info-panel">
        <div class="card">
          <div class="card-header">
            <h2>EEG Channels</h2>
          </div>
          <div class="card-content">
            <div class="channel-list">
              <div class="channel-item">
                <div class="channel-dot" style="background-color: #4F8CFF;"></div>
                <span class="channel-name">TP9</span>
                <span class="channel-value positive">37.60</span>
              </div>
              <div class="channel-item">
                <div class="channel-dot" style="background-color: #4ECDC4;"></div>
                <span class="channel-name">AF7</span>
                <span class="channel-value positive">15.63</span>
              </div>
              <div class="channel-item">
                <div class="channel-dot" style="background-color: #FFB865;"></div>
                <span class="channel-name">AF8</span>
                <span class="channel-value positive">9.28</span>
              </div>
              <div class="channel-item">
                <div class="channel-dot" style="background-color: #FF6B6B;"></div>
                <span class="channel-name">TP10</span>
                <span class="channel-value negative">-116.21</span>
              </div>
              <div class="channel-item">
                <div class="channel-dot" style="background-color: #C788E5;"></div>
                <span class="channel-name">Right AUX</span>
                <span class="channel-value positive">57.13</span>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>About</h2>
          </div>
          <div class="card-content">
            <p>This visualizer displays real-time EEG data on a 3D brain model. The colored dots represent electrodes, with size and color changing based on signal intensity.</p>
            
            <div class="info-item">
              <span class="info-label">Data Source:</span>
              <span class="info-value">Experiment_1/A1</span>
            </div>
            
            <div class="info-item">
              <span class="info-label">Interactions:</span>
              <span class="info-value">Click and drag to rotate, scroll to zoom.</span>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>Signal Legend</h2>
          </div>
          <div class="card-content">
            <div class="legend">
              <div class="legend-gradient"></div>
              <div class="legend-labels">
                <span>Low</span>
                <span>High</span>
              </div>
            </div>
          </div>
        </div>
      </aside>
    </div>

    <!-- Bottom Chart Section -->
    <div id="line-chart-container">
      <div class="chart-header">
        <div class="chart-title-area">
          <h2>EEG Data Analysis</h2>
          <p class="chart-subtitle">Real-time amplitude visualization</p>
        </div>
        <div class="chart-controls">
          <div class="control-group">
            <label for="participant-selector">Participant:</label>
            <select id="participant-selector" class="form-control">
              <option value="A1">Participant A1</option>
              <option value="A2">Participant A2</option>
              <option value="A3">Participant A3</option>
              <option value="B1" selected>Participant B1</option>
              <option value="B2">Participant B2</option>
            </select>
          </div>
          <div class="control-group">
            <label for="channel-selector">Channel:</label>
            <select id="channel-selector" class="form-control">
              <option value="TP9" selected>TP9</option>
              <option value="AF7">AF7</option>
              <option value="AF8">AF8</option>
              <option value="TP10">TP10</option>
              <option value="Right AUX">Right AUX</option>
            </select>
          </div>
          <div class="control-group">
            <button id="zoom-reset" class="btn btn-outline btn-sm">
              <i class="fas fa-arrows-alt"></i> Reset Zoom
            </button>
          </div>
        </div>
      </div>
      <div id="eeg-chart-svg-container">
        <!-- D3 SVG chart will be rendered here -->
      </div>
    </div>

    <!-- Loading indicator -->
    <div id="loading">
      <div class="spinner"></div>
      <p>Loading brain model and EEG data...</p>
    </div>

    <!-- Scripts -->
    <script async src="https://cdn.jsdelivr.net/npm/es-module-shims@1.7.3/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
      }
    </script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script type="module" src="brainViewer.js"></script>
    <script type="module" src="d3viz.js"></script>
    <script type="module" src="lineChart.js"></script>
    <script type="module" src="cumulativeChart.js"></script>
  </div>

  <!-- Tab switching script -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const brainViewTab = document.getElementById('brain-view-tab');
      const cumulativePlotTab = document.getElementById('cumulative-plot-tab');
      const writeupTab = document.getElementById('project-writeup-tab');

      const brainViewContent = document.getElementById('brain-view-content');
      const cumulativePlotContent = document.getElementById('cumulative-plot-content');
      const writeupContent = document.getElementById('project-writeup-content');

      const appContainer = document.getElementById('app-container');
      const lineChartContainer = document.getElementById('line-chart-container');

      function activateTab(activeTab, activeContent) {
        [brainViewTab, cumulativePlotTab, writeupTab].forEach(tab => tab.classList.remove('active'));
        [brainViewContent, cumulativePlotContent, writeupContent].forEach(content => content.classList.remove('active'));

        activeTab.classList.add('active');
        activeContent.classList.add('active');

        if (activeTab === brainViewTab) {
          lineChartContainer.style.display = 'block';
          appContainer.classList.remove('cumulative-active');
        } else {
          lineChartContainer.style.display = 'none';
          appContainer.classList.add('cumulative-active');
        }
      }

      brainViewTab.addEventListener('click', () => activateTab(brainViewTab, brainViewContent));
      cumulativePlotTab.addEventListener('click', () => activateTab(cumulativePlotTab, cumulativePlotContent));
      writeupTab.addEventListener('click', () => activateTab(writeupTab, writeupContent));

      // Initial state
      if (brainViewTab.classList.contains('active')) {
        activateTab(brainViewTab, brainViewContent);
      } else if (cumulativePlotTab.classList.contains('active')) {
        activateTab(cumulativePlotTab, cumulativePlotContent);
      } else if (writeupTab.classList.contains('active')) {
        activateTab(writeupTab, writeupContent);
      }
    });
  </script>
</body>
</html>